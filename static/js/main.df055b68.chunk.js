(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{193:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(67),c=a.n(o),i=(a(74),a(75),a(23)),l=a(3),r=a(4),d=a(24),u=a.n(d),j=a(39),b=a(68),p=a.p+"static/media/dark-loader.824c3104.gif",h=a.p+"static/media/logoForLight.437059c6.png",O=a.p+"static/media/logoForDark.47b59b98.png",m=a(38),g=a(1),f=function(e){var t=e.location,a=new URLSearchParams(t.search).get("pollId"),n=Object(s.useState)(!0),o=Object(r.a)(n,2),c=o[0],l=o[1],d=Object(s.useState)("No data"),f=Object(r.a)(d,2),x=f[0],v=f[1],N=Object(s.useState)("logo-container start-screen"),q=Object(r.a)(N,2),S=q[0],I=q[1],w=Object(s.useState)("logo"),k=Object(r.a)(w,2),y=k[0],L=k[1],T=Object(s.useState)(""),F=Object(r.a)(T,2),C=F[0],P=F[1],R=Object(s.useState)("No data"),B=Object(r.a)(R,2),A=B[0],M=B[1];function D(){return void 0==a||0==a.length?Object(g.jsxs)("div",{style:{display:"flex","flex-direction":"column"},children:[Object(g.jsx)("input",{onChange:function(e){P(e.target.value.toLowerCase())},placeholder:"Ingresa el ID",className:"pollId-input"}),Object(g.jsx)(i.b,{to:"?pollId=".concat(C),className:"pollId-btn",children:Object(g.jsx)("h1",{className:"pollId-btn-txt",children:"Contestar"})})]}):Object(g.jsx)(g.Fragment,{})}"No data"==A&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(M("dark"),v(O)):(M("light"),v(h)),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){e.matches?(M("dark"),v(O)):(M("light"),v(h))}))),void 0==a||0==a.length||c&&setTimeout((function(){I("logo-container header"),L("logo header-logo"),l(!1)}),1e3);var E=Object(s.useState)(!1),J=Object(r.a)(E,2),z=J[0],G=J[1],H=Object(s.useState)(!1),U=Object(r.a)(H,2),V=U[0],W=U[1];V||(window.scrollTo(0,0),W(!0));var Z=Object(s.useState)("initial"),K=Object(r.a)(Z,2),Q=K[0],X=K[1],Y=Object(s.useState)("No data"),$=Object(r.a)(Y,2),_=$[0],ee=$[1];"No data"==_&&void 0!=a&&ee(localStorage.getItem(a)),"true"==_&&(X("loadingResults"),G(!0),ee(!0));var te=Object(s.useState)(0),ae=Object(r.a)(te,2),se=ae[0],ne=ae[1],oe=Object(s.useState)("multiTextOption"),ce=Object(r.a)(oe,2),ie=ce[0],le=ce[1],re=Object(s.useState)("Loading..."),de=Object(r.a)(re,2),ue=de[0],je=de[1],be=Object(s.useState)([]),pe=Object(r.a)(be,2),he=pe[0],Oe=pe[1],me=Object(s.useState)([]),ge=Object(r.a)(me,2),fe=ge[0],xe=ge[1],ve=Object(s.useState)("poll-options-container"),Ne=Object(r.a)(ve,2),qe=Ne[0],Se=Ne[1],Ie=Object(s.useState)("poll-question"),we=Object(r.a)(Ie,2),ke=we[0],ye=we[1],Le=Object(s.useState)([]),Te=Object(r.a)(Le,2),Fe=Te[0],Ce=Te[1];z&&G(!1);var Pe=Object(s.useState)("No data"),Re=Object(r.a)(Pe,2),Be=Re[0],Ae=Re[1];function Me(e){setTimeout((function(){if(Se("poll-options-container dissapear-left"),ye("poll-question dissapear-left"),se+1==Be.questions.length&&e){X("loadingResults"),localStorage.setItem(a,"true");var t={userId:"anonim",method:"submitAnswers",pollId:a,answers:Fe};u()({method:"post",url:"https://us-central1-poleoo.cloudfunctions.net/server",data:t}),localStorage.setItem(a,"true")}e&&se+1<Be.questions.length&&setTimeout((function(){je(Be.questions[se+1].title[Be.defaultLang]),Oe(Be.questions[se+1].options),le(Be.questions[se+1].type);for(var e=[],t=0;t<Be.questions[se+1].options.length;t++)e.push("".concat(Be.questions[se+1].type,"-container"));xe(e),ne(se+1),ye("poll-question hide dissapear-right"),Se("poll-options-container hide dissapear-right"),setTimeout((function(){ye("poll-question"),Se("poll-options-container"),G(!0)}),200)}),200)}),500)}function De(e){if(Be.questions[se].filter.isFilter)return!(Be.questions[se].filter.correctIndexes.indexOf(e)<0)||(localStorage.setItem(a,"true"),ee("true"),X("loadingResults"),!1);var t=Fe;return t.push(e),Ce(t),!0}"No data"==Be&&void 0!=a&&u()({method:"post",url:"https://us-central1-poleoo.cloudfunctions.net/server",data:{method:"queryPollByPollId",pollId:a}}).then((function(e){Ae(e.data),"true"!=localStorage.getItem(a)&&X("answering"),je(e.data.questions[se].title[e.data.defaultLang]),Oe(e.data.questions[se].options),le(e.data.questions[se].type);for(var t=[],s=0;s<e.data.questions[se].options.length;s++)t.push("".concat(e.data.questions[se].type,"-container"));xe(t)}));var Ee,Je=Object(s.useState)("No data"),ze=Object(r.a)(Je,2),Ge=ze[0],He=ze[1];return"loadingResults"==Q&&void 0!=a&&(X("final"),u()({method:"post",url:"https://us-central1-poleoo.cloudfunctions.net/server",data:{method:"queryResultsByPollId",pollId:a}}).then((function(e){He(e.data),G(!0)}))),"loadingResults"==Q||"final"==Q?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:S,children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)("img",{src:x,alt:"Poleo",className:y}),D()]})}),Object(g.jsxs)("div",{className:"content-container",children:[Object(g.jsxs)("div",{className:"poll-container",children:[Object(g.jsx)("h1",{className:"",children:"No data"==Be?"Loading results...":Be.title[Be.defaultLang]}),function(){if("No data"==Ge)return Object(g.jsx)("img",{className:"loading-gif",alt:"Loading...",src:p});if("Poll results are private"==Ge)return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h3",{children:"es"==Be.defaultLang?"Gracias por contestar!":"Thank you for answering!"}),Object(g.jsx)(j.a,{className:"check-mark"})]});if("No data"!=Be){for(var e=[],t=[],a=0;a<Be.questions.length;a++)if(!Be.questions[a].filter.isFilter){e.push([]),t.push(Be.questions[a].title[Be.defaultLang]);for(var s=0;s<Be.questions[a].options.length;s++)"multiTextOption"==Be.questions[a].type?e[a].push(Be.questions[a].options[s][Be.defaultLang]):e[a].push(Be.questions[a].options[s].name[Be.defaultLang])}return Object(g.jsx)("div",{className:"results-container",children:Ge.map((function(a){return Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h2",{className:"results-question",children:t[Ge.indexOf(a)]}),Object(g.jsx)(b.HorizontalBar,{data:{labels:e[Ge.indexOf(a)],datasets:[{label:"Votos",data:a,backgroundColor:"rgba(18, 229, 122, 0.3)",borderColor:"rgb(18, 229, 122)",borderWidth:3,maxBarThickness:30}]},options:{maintainAspectRatio:!0,scales:{xAxes:[{ticks:{beginAtZero:!0}}]}},height:120,className:"results-chart"})]})}))})}}()]}),Object(g.jsx)("p",{style:{color:"rgba(255,255,255,1)"},children:z})]})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:S,children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)("img",{src:x,alt:"Poleo",className:y}),D()]})}),Object(g.jsxs)("div",{className:"content-container",children:[Object(g.jsxs)("div",{className:"poll-container",children:[Object(g.jsx)("h1",{className:ke,children:ue}),Object(g.jsx)("div",{className:qe,style:{display:"multiImgOption"==ie?"flex":"block"},children:(Ee=ie,"multiTextOption"==Ee?he.map((function(e){return Object(g.jsxs)("div",{className:fe[he.indexOf(e)],onClick:function(){var t=fe;t[he.indexOf(e)]="multiTextOption-container multiTextOption-container-selected",xe(t),G(!0),Me(De(he.indexOf(e)))},children:[Object(g.jsx)(j.b,{className:"unchecked-icon"}),Object(g.jsx)("p",{className:"option-text",children:e[Be.defaultLang]})]})})):"multiImgOption"==Ee?he.map((function(e){return Object(g.jsxs)("div",{className:fe[he.indexOf(e)],onClick:function(){var t=fe;t[he.indexOf(e)]="multiImgOption-container multiTextOption-container-selected",xe(t),G(!0),Me(De(he.indexOf(e)))},children:[Object(g.jsx)("img",{className:"option-img",alt:"img",src:e.img}),Object(g.jsx)("p",{className:"option-text",children:void 0==e.name?"":e.name[Be.defaultLang]})]})})):void 0)}),Object(g.jsxs)("div",{className:"progress-bar-content-container",children:[Object(g.jsx)("div",{className:"progress-bar-container",children:Object(g.jsx)("div",{className:"progress-bar",style:{width:"No data"==Be?"0%":"".concat((se+1)/Be.questions.length*100,"%")}})}),Object(g.jsx)("p",{children:"".concat(se+1," de ").concat("No data"==Be?0:Be.questions.length)})]})]}),Object(g.jsx)("p",{style:{color:"rgba(255,255,255,1)"},children:z})]})]})};var x=function(){return Object(g.jsx)(i.a,{children:Object(g.jsx)(l.c,{children:Object(g.jsx)(l.a,{path:"/",component:f})})})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,194)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),o(e),c(e)}))};c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(x,{})}),document.getElementById("root")),v()},74:function(e,t,a){},75:function(e,t,a){}},[[193,1,2]]]);
//# sourceMappingURL=main.df055b68.chunk.js.map