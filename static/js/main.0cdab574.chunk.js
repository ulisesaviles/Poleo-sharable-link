(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{193:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(67),c=a.n(o),i=(a(74),a(75),a(23)),l=a(3),r=a(4),d=a(24),u=a.n(d),j=a(39),b=a(68),p=a.p+"static/media/dark-loader.824c3104.gif",h=a.p+"static/media/logoForLight.437059c6.png",O=a.p+"static/media/logoForDark.47b59b98.png",m=a(38),g=a(1),f=function(e){var t=e.location,a=new URLSearchParams(t.search).get("poll"),n=Object(s.useState)(!0),o=Object(r.a)(n,2),c=o[0],l=(o[1],Object(s.useState)("No data")),d=Object(r.a)(l,2),f=d[0],x=d[1],N=Object(s.useState)("logo-container start-screen"),v=Object(r.a)(N,2),q=v[0],S=v[1],I=Object(s.useState)("logo"),w=Object(r.a)(I,2),k=w[0],y=w[1],L=Object(s.useState)(""),T=Object(r.a)(L,2),F=T[0],C=T[1],P=Object(s.useState)("No data"),R=Object(r.a)(P,2),B=R[0],A=R[1];function M(){return void 0==a||0==a.length?Object(g.jsxs)("div",{style:{display:"flex","flex-direction":"column"},children:[Object(g.jsx)("input",{onChange:function(e){C(e.target.value.toLowerCase())},placeholder:"Ingresa el ID",className:"pollId-input"}),Object(g.jsx)(i.b,{to:"?poll=".concat(F),className:"pollId-btn",children:Object(g.jsx)("h1",{className:"pollId-btn-txt",children:"Contestar"})})]}):Object(g.jsx)(g.Fragment,{})}"No data"==B&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(A("dark"),x(O)):(A("light"),x(h)),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){e.matches?(A("dark"),x(O)):(A("light"),x(h))}))),void 0==a||0==a.length||c&&setTimeout((function(){S("logo-container header"),y("logo header-logo")}),1e3);var D=Object(s.useState)(!1),E=Object(r.a)(D,2),J=E[0],z=E[1],G=Object(s.useState)(!1),H=Object(r.a)(G,2),U=H[0],V=H[1];U||(window.scrollTo(0,0),V(!0));var W=Object(s.useState)("initial"),Z=Object(r.a)(W,2),K=Z[0],Q=Z[1],X=Object(s.useState)("No data"),Y=Object(r.a)(X,2),$=Y[0],_=Y[1];"No data"==$&&void 0!=a&&_(localStorage.getItem(a)),"true"==$&&(Q("loadingResults"),z(!0),_(!0));var ee=Object(s.useState)(0),te=Object(r.a)(ee,2),ae=te[0],se=te[1],ne=Object(s.useState)("multiTextOption"),oe=Object(r.a)(ne,2),ce=oe[0],ie=oe[1],le=Object(s.useState)("Loading..."),re=Object(r.a)(le,2),de=re[0],ue=re[1],je=Object(s.useState)([]),be=Object(r.a)(je,2),pe=be[0],he=be[1],Oe=Object(s.useState)([]),me=Object(r.a)(Oe,2),ge=me[0],fe=me[1],xe=Object(s.useState)("poll-options-container"),Ne=Object(r.a)(xe,2),ve=Ne[0],qe=Ne[1],Se=Object(s.useState)("poll-question"),Ie=Object(r.a)(Se,2),we=Ie[0],ke=Ie[1],ye=Object(s.useState)([]),Le=Object(r.a)(ye,2),Te=Le[0],Fe=Le[1];J&&z(!1);var Ce=Object(s.useState)("No data"),Pe=Object(r.a)(Ce,2),Re=Pe[0],Be=Pe[1];function Ae(e){setTimeout((function(){if(qe("poll-options-container dissapear-left"),ke("poll-question dissapear-left"),ae+1==Re.questions.length&&e){Q("loadingResults"),localStorage.setItem(a,"true");var t={userId:"anonim",method:"submitAnswers",pollId:a,answers:Te};u()({method:"post",url:"https://us-central1-poleoo.cloudfunctions.net/randomNumber",data:t}),localStorage.setItem(a,"true")}e&&ae+1<Re.questions.length&&setTimeout((function(){ue(Re.questions[ae+1].title[Re.defaultLang]),he(Re.questions[ae+1].options),ie(Re.questions[ae+1].type);for(var e=[],t=0;t<Re.questions[ae+1].options.length;t++)e.push("".concat(Re.questions[ae+1].type,"-container"));fe(e),se(ae+1),ke("poll-question hide dissapear-right"),qe("poll-options-container hide dissapear-right"),setTimeout((function(){ke("poll-question"),qe("poll-options-container"),z(!0)}),200)}),200)}),500)}function Me(e){if(Re.questions[ae].filter.isFilter)return!(Re.questions[ae].filter.correctIndexes.indexOf(e)<0)||(localStorage.setItem(a,"true"),_("true"),Q("loadingResults"),!1);var t=Te;return t.push(e),Fe(t),!0}"No data"==Re&&void 0!=a&&u()({method:"post",url:"https://us-central1-poleoo.cloudfunctions.net/randomNumber",data:{method:"queryPollByPollId",pollId:a}}).then((function(e){Be(e.data),"true"!=localStorage.getItem(a)&&Q("answering"),ue(e.data.questions[ae].title[e.data.defaultLang]),he(e.data.questions[ae].options),ie(e.data.questions[ae].type);for(var t=[],s=0;s<e.data.questions[ae].options.length;s++)t.push("".concat(e.data.questions[ae].type,"-container"));fe(t)}));var De,Ee=Object(s.useState)("No data"),Je=Object(r.a)(Ee,2),ze=Je[0],Ge=Je[1];return"loadingResults"==K&&void 0!=a&&(Q("final"),u()({method:"post",url:"https://us-central1-poleoo.cloudfunctions.net/randomNumber",data:{method:"queryResultsByPollId",pollId:a}}).then((function(e){Ge(e.data),z(!0)}))),"loadingResults"==K||"final"==K?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:q,children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)("img",{src:f,alt:"Poleo",className:k}),M()]})}),Object(g.jsxs)("div",{className:"content-container",children:[Object(g.jsxs)("div",{className:"poll-container",children:[Object(g.jsx)("h1",{className:"",children:"No data"==Re?"Loading results...":Re.title[Re.defaultLang]}),function(){if("No data"==ze)return Object(g.jsx)("img",{className:"loading-gif",alt:"Loading...",src:p});if("Poll results are private"==ze)return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h3",{children:"es"==Re.defaultLang?"Gracias por contestar!":"Thank you for answering!"}),Object(g.jsx)(j.a,{className:"check-mark"})]});if("No data"!=Re){for(var e=[],t=[],a=0;a<Re.questions.length;a++)if(!Re.questions[a].filter.isFilter){e.push([]),t.push(Re.questions[a].title[Re.defaultLang]);for(var s=0;s<Re.questions[a].options.length;s++)"multiTextOption"==Re.questions[a].type?e[a].push(Re.questions[a].options[s][Re.defaultLang]):e[a].push(Re.questions[a].options[s].name[Re.defaultLang])}return Object(g.jsx)("div",{className:"results-container",children:ze.map((function(a){return Object(g.jsxs)("div",{className:"chart-container",children:[Object(g.jsx)("h2",{className:"results-question",children:t[ze.indexOf(a)]}),Object(g.jsx)(b.HorizontalBar,{data:{labels:e[ze.indexOf(a)],datasets:[{label:"Votos",data:a,backgroundColor:"rgba(18, 229, 122, 0.3)",borderColor:"rgb(18, 229, 122)",borderWidth:3,maxBarThickness:30}]},options:{maintainAspectRatio:!0,scales:{xAxes:[{ticks:{beginAtZero:!0}}]}},height:120,className:"results-chart"})]})}))})}}()]}),Object(g.jsx)("p",{style:{color:"rgba(255,255,255,1)"},children:J})]})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:q,children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)("img",{src:f,alt:"Poleo",className:k}),M()]})}),Object(g.jsxs)("div",{className:"content-container",children:[Object(g.jsxs)("div",{className:"poll-container",children:[Object(g.jsx)("h1",{className:we,children:de}),Object(g.jsx)("div",{className:ve,style:{display:"multiImgOption"==ce?"flex":"block"},children:(De=ce,"multiTextOption"==De?pe.map((function(e){return Object(g.jsxs)("div",{className:ge[pe.indexOf(e)],onClick:function(){var t=ge;t[pe.indexOf(e)]="multiTextOption-container multiTextOption-container-selected",fe(t),z(!0),Ae(Me(pe.indexOf(e)))},children:[Object(g.jsx)(j.b,{className:"unchecked-icon"}),Object(g.jsx)("p",{className:"option-text",children:e[Re.defaultLang]})]})})):"multiImgOption"==De?pe.map((function(e){return Object(g.jsxs)("div",{className:ge[pe.indexOf(e)],onClick:function(){var t=ge;t[pe.indexOf(e)]="multiImgOption-container multiTextOption-container-selected",fe(t),z(!0),Ae(Me(pe.indexOf(e)))},children:[Object(g.jsx)("img",{className:"option-img",alt:"img",src:e.img}),Object(g.jsx)("p",{className:"option-text",children:void 0==e.name?"":e.name[Re.defaultLang]})]})})):void 0)}),Object(g.jsxs)("div",{className:"progress-bar-content-container",children:[Object(g.jsx)("div",{className:"progress-bar-container",children:Object(g.jsx)("div",{className:"progress-bar",style:{width:"No data"==Re?"0%":"".concat((ae+1)/Re.questions.length*100,"%")}})}),Object(g.jsx)("p",{children:"".concat(ae+1," de ").concat("No data"==Re?0:Re.questions.length)})]})]}),Object(g.jsx)("p",{style:{color:"rgba(255,255,255,1)"},children:J})]})]})};var x=function(){return Object(g.jsx)(i.a,{children:Object(g.jsx)(l.c,{children:Object(g.jsx)(l.a,{path:"/",component:f})})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,194)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),o(e),c(e)}))};c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(x,{})}),document.getElementById("root")),N()},74:function(e,t,a){},75:function(e,t,a){}},[[193,1,2]]]);
//# sourceMappingURL=main.0cdab574.chunk.js.map